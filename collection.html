<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Emote Collection</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="container topbar">
    <h1 class="collection-title">My Emote Collection</h1>
    <a class="back-link" href="index.html">‚Üê Back to Mirror</a>
  </header>
  <main class="container">
    <section>
      <h2 style="font-size:16px;margin:6px 0 12px 0;color:#ddd">Goblins <span id="goblinsCount" class="collection-count">(0/4)</span></h2>
      <div class="collection-grid" id="goblinsGrid"></div>
    </section>
    <section style="margin-top:18px">
      <h2 style="font-size:16px;margin:6px 0 12px 0;color:#ddd">6 7 Special <span id="special67Count" class="collection-count">(0/1)</span></h2>
      <div class="collection-grid" id="special67Grid"></div>
    </section>
  </main>
  <script>
    const BRAINROT_MAP_URL = 'brainrotMap.json';
    const EMOTES = [
      { key:'happy', label:'Happy' },
      { key:'sad', label:'Sad' },
      { key:'angry', label:'Angry' },
      { key:'surprised', label:'Surprised' }
    ];
    function getFound(){ try { return JSON.parse(localStorage.getItem('emotesFound')||'{}'); } catch(e){ return {}; } }
    async function loadMap(){
      const res = await fetch(BRAINROT_MAP_URL + '?t=' + Date.now(), { cache:'no-cache' });
      if(!res.ok) throw new Error('Failed to load brainrotMap.json');
      return await res.json();
    }
    function render(map){
      const grid = document.getElementById('goblinsGrid');
      const found = getFound();
      let count = 0;
      EMOTES.forEach(({key,label})=>{
        const info = map[key];
        const unlocked = !!found[key];
        if(unlocked) count++;
        const card = document.createElement('div');
        card.className = 'emote-card' + (unlocked ? '' : ' locked');
        const img = document.createElement('img');
        img.className = 'thumb';
        img.alt = label;
        img.src = (info && info.src) ? info.src : '';
        const title = document.createElement('div');
        title.className = 'title';
        title.textContent = label;
        card.appendChild(img);
        card.appendChild(title);
        grid.appendChild(card);
      });
      document.getElementById('goblinsCount').textContent = `(${count}/4)`;

      // 6 7 Special section
      const sGrid = document.getElementById('special67Grid');
      sGrid.innerHTML = '';
      const unlocked = !!found['bothhands'];
      const card = document.createElement('div');
      card.className = 'emote-card' + (unlocked ? '' : ' locked');
      const img = document.createElement('img');
      img.className = 'thumb';
      img.alt = '6 7 Special';
      const src = (map && map['bothhands'] && map['bothhands'].src) ? map['bothhands'].src : 'brainrot/cr-67.jpg';
      img.src = src;
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = '6 7 Special';
      card.appendChild(img);
      card.appendChild(title);
      sGrid.appendChild(card);
      document.getElementById('special67Count').textContent = `(${unlocked ? 1 : 0}/1)`;
    }
    loadMap().then(render).catch(err=>{
      console.error(err);
      // Fallback mapping if JSON fails
      render({
        happy:{src:'brainrot/goblin-laugh.jpg'},
        sad:{src:'brainrot/goblin-cry.jpg'},
        angry:{src:'brainrot/goblin-greed.jpg'},
        surprised:{src:'brainrot/goblin-tongue.png'}
      });
    });
  </script>
</body>
</html>

